# 机械臂手势控制项目 - 代码分类说明

## 📁 项目概述

本项目是一个完整的机械臂手势控制系统，包含以下主要组件：
- Arduino机械臂控制代码
- Python网关服务器
- iOS手机端应用
- 各种测试和诊断工具

## 🔧 Arduino代码版本分类

### 第一版代码 (基础版本)
**文件**: `hand_control_nano_parallel.ino`
- **功能**: 基础机械手控制器
- **特性**: 
  - 支持数字手势0-9
  - 支持石头剪刀布手势
  - 并行舵机控制
  - 串口通信
- **适用场景**: 基础功能测试和演示

### 第二版代码 (修复版本)
**文件**: 
- `hand_control_nano_parallel_fixed.ino` - 修复版
- `hand_control_nano_parallel_fixed_v2.ino` - 修复版V2  
- `hand_control_nano_parallel_fixed_v3.ino` - 修复版V3 (推荐使用)

**主要改进**:
- 添加舵机连接检测和初始化功能
- 优化舵机控制逻辑
- 增强错误处理机制
- 改进串口通信稳定性
- 添加详细的调试信息输出

**推荐使用**: `hand_control_nano_parallel_fixed_v3.ino` (最新稳定版本)

## 🐍 Python代码分类

### 核心服务器代码
**文件**: 
- `gateway_server.py` - 主要的Flask网关服务器
- `setup.py` - 项目安装和配置脚本

**功能**:
- 处理手机端HTTP请求
- 串口通信控制Arduino
- 手势数据分析和识别
- 自动端口检测
- 实时日志输出

### 测试和诊断代码
**文件**:
- `test_arduino_serial.py` - Arduino串口通信测试
- `test_arduino_detailed.py` - 详细的Arduino功能测试
- `test_http_connection.py` - HTTP连接测试
- `test_system.py` - 系统整体功能测试
- `diagnose_servos.py` - 舵机诊断工具

**用途**: 系统调试、硬件检测、功能验证

### 手势识别测试
**文件**:
- `test_gesture_recognition.py` - 手势识别算法测试
- `test_ios_hand_data.py` - iOS手部数据处理测试

**用途**: 验证手势识别算法的准确性和稳定性

### 机械臂控制测试
**文件**:
- `test_mechanical_arm.py` - 机械臂基础控制测试
- `test_manual_buttons.py` - 手动按钮控制测试

**用途**: 测试机械臂的基本控制功能

### 石头剪刀布游戏测试
**文件**:
- `test_rps_fix.py` - 石头剪刀布游戏修复测试
- `test_scissors_accuracy.py` - 剪刀手势精度测试

**用途**: 验证游戏功能的正确性

### 手指控制测试
**文件**:
- `test_pinky_finger.py` - 小拇指控制测试
- `test_pinky_180_degree.py` - 小拇指180度控制测试
- `test_pinky_improvement.py` - 小拇指控制改进测试
- `test_current_pinky.py` - 当前小拇指控制状态测试

**用途**: 专门测试小拇指舵机的控制精度和范围

### 手势控制测试
**文件**:
- `test_openmax.py` - 最大张开角度测试
- `test_closemax.py` - 最大闭合角度测试

**用途**: 测试舵机的角度极限和控制精度

## 📱 iOS应用代码

**目录**: `hand/`
**主要文件**:
- `ContentView.swift` - 主界面
- `HandController.swift` - 手势控制器
- `SimpleCameraView.swift` - 摄像头视图
- `SimpleGestureRecognitionView.swift` - 手势识别视图
- `CameraDataView.swift` - 摄像头数据显示视图

**功能**:
- 实时摄像头预览
- AI手势识别
- 游戏统计显示
- 连接状态监控
- 美观的用户界面

## 📋 配置和文档

**文件**:
- `requirements.txt` - Python依赖包列表
- `start_server.sh` - 服务器启动脚本
- `硬件检查指南.md` - 硬件连接和检查指南
- `项目总结.md` - 项目开发总结文档

## 🚀 使用建议

### 新用户入门
1. 从 `hand_control_nano_parallel_fixed_v3.ino` 开始
2. 使用 `gateway_server.py` 作为主要服务器
3. 参考 `硬件检查指南.md` 进行硬件连接

### 开发调试
1. 使用 `diagnose_servos.py` 检查舵机状态
2. 使用 `test_arduino_serial.py` 测试串口通信
3. 使用 `test_system.py` 进行系统整体测试

### 功能扩展
1. 参考现有的测试文件了解API使用
2. 基于 `gateway_server.py` 添加新功能
3. 使用iOS应用作为前端界面

## 📊 代码质量评估

### 高质量代码 (推荐使用)
- `hand_control_nano_parallel_fixed_v3.ino` - 最新稳定版本
- `gateway_server.py` - 核心服务器代码
- `diagnose_servos.py` - 诊断工具

### 测试代码 (开发参考)
- 所有 `test_*.py` 文件 - 功能测试和验证
- 可用于学习API使用和功能实现

### 文档代码 (项目说明)
- `README.md` - 项目总体说明
- `硬件检查指南.md` - 硬件连接指南
- `项目总结.md` - 开发总结

## 🔄 版本演进

1. **V1**: 基础功能实现
2. **V2**: 添加错误处理和调试
3. **V3**: 优化性能和稳定性
4. **当前**: 完整系统集成

## 📞 技术支持

如有问题，请参考：
1. `硬件检查指南.md` - 硬件相关问题
2. `项目总结.md` - 开发经验总结
3. 各测试文件 - 功能验证方法
