# 机械臂硬件检查指南

## 问题诊断结果

根据测试结果，我们发现：
- ✅ iOS应用完全正常
- ✅ 服务器通信正常  
- ✅ Arduino连接正常
- ❌ **舵机硬件连接有问题**

## 硬件连接检查清单

### 1. 电源连接检查
- [ ] 舵机电源线是否正确连接到电源模块
- [ ] 电源模块是否提供足够的电流（建议5V/2A以上）
- [ ] 电源地线是否正确连接
- [ ] 检查电源电压是否稳定在5V

### 2. 信号线连接检查
- [ ] 舵机1 (小拇指): 信号线连接到Arduino引脚3
- [ ] 舵机2 (无名指): 信号线连接到Arduino引脚4
- [ ] 舵机3 (中指): 信号线连接到Arduino引脚5
- [ ] 舵机4 (食指): 信号线连接到Arduino引脚6
- [ ] 舵机5 (大拇指): 信号线连接到Arduino引脚7
- [ ] 舵机6 (手腕): 信号线连接到Arduino引脚8

### 3. 地线连接检查
- [ ] 所有舵机的地线是否连接到Arduino的GND
- [ ] 电源地线是否连接到Arduino的GND
- [ ] 检查地线连接是否牢固

### 4. 舵机本身检查
- [ ] 舵机是否完好无损
- [ ] 舵机齿轮是否卡住
- [ ] 舵机线缆是否损坏
- [ ] 舵机型号是否支持5V供电

## 修复步骤

### 步骤1: 重新上传Arduino代码
1. 打开Arduino IDE
2. 打开 `hand_control_nano_parallel_fixed.ino` 文件
3. 选择正确的板型和端口
4. 上传代码到Arduino

### 步骤2: 检查串口输出
1. 打开Arduino IDE的串口监视器
2. 波特率设置为9600
3. 观察启动时的舵机初始化信息
4. 查看是否有舵机连接失败的提示

### 步骤3: 逐个测试舵机
使用以下命令逐个测试每个舵机：
```
SERVO:0:90  # 测试舵机1
SERVO:1:90  # 测试舵机2
SERVO:2:90  # 测试舵机3
SERVO:3:90  # 测试舵机4
SERVO:4:90  # 测试舵机5
SERVO:5:90  # 测试舵机6
```

### 步骤4: 测试手势命令
```
ROCK      # 石头手势
PAPER     # 布手势
SCISSORS  # 剪刀手势
RESET     # 重置手势
```

## 常见问题解决方案

### 问题1: 舵机不转动
**可能原因:**
- 电源不足
- 信号线连接错误
- 舵机损坏

**解决方案:**
1. 检查电源电压和电流
2. 重新检查信号线连接
3. 更换舵机测试

### 问题2: 舵机转动异常
**可能原因:**
- 角度范围设置错误
- 舵机型号不匹配
- 机械结构卡住

**解决方案:**
1. 调整角度范围（0-180度）
2. 检查舵机型号规格
3. 检查机械结构

### 问题3: 部分舵机不工作
**可能原因:**
- 特定舵机连接问题
- 特定引脚损坏
- 电源分配不均

**解决方案:**
1. 逐个检查舵机连接
2. 更换Arduino引脚测试
3. 检查电源分配

## 测试工具

### 1. 串口测试
```bash
python3 test_arduino_serial.py
```

### 2. 舵机诊断
```bash
python3 diagnose_servos.py
```

### 3. 手动测试
在Arduino串口监视器中输入：
```
SERVO:0:90
SERVO:0:180
SERVO:0:0
```

## 预期结果

修复后，你应该看到：
1. Arduino启动时显示所有舵机连接成功
2. 发送命令时舵机正常转动
3. iOS应用手动测试按钮能控制机械臂动作

## 联系支持

如果按照以上步骤仍然无法解决问题，请提供：
1. Arduino串口监视器的完整输出
2. 硬件连接照片
3. 舵机型号和规格
4. 电源模块型号和规格
